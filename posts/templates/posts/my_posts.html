{% extends "users/base.html" %}

{% block title %}My Posts{% endblock %}

{% block content %}
<h1>My Posts</h1>

{% if posts %}
    <ul>
        {% for post in posts %}
            <li style="margin-bottom: 20px; border-bottom: 1px solid #ccc; padding-bottom: 10px;">
                <h3>{{ post.title }}</h3>
                <p>{{ post.content }}</p>
                <small>Created at: {{ post.created_at }}</small><br><br>

                <!-- Просмотр поста -->
                <a href="{% url 'posts:post-detail-page' post.id %}">
                    <button type="button">View</button>
                </a>

                <!-- Редактирование поста -->
                <a href="{% url 'posts:post-update-page' post.id %}">
                    <button type="button">Edit</button>
                </a>

                <!-- Удаление поста -->
                <form action="{% url 'posts:post-delete-page' post.id %}" method="post" style="display:inline;">
                    {% csrf_token %}
                    <button type="submit" onclick="return confirm('Are you sure you want to delete this post?');">
                        Delete
                    </button>
                </form>
            </li>
        {% endfor %}
    </ul>
{% else %}
    <p>You have no posts yet.</p>
{% endif %}

<br>
<a href="{% url 'posts:all-posts' %}">
    <button type="button">Back to all posts</button>
</a>
{% endblock %}
